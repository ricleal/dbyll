---
layout: post
title: Matplotlib is as simple as this!
date: '2012-11-21T05:47:00.000-05:00'
author: ricleal
tags:
- Programming
- Python
excerpt: '...'
comments: true
---

Imagine data you have a comma separated file (CSV) called data.csv: <br /><br />
<pre
    style="background: #f6f8ff; color: #000020;"><span style="color: maroon;">'</span><span style="color: #1060b6;">position</span><span style="color: maroon;">'</span><span style="color: #308080;">,</span> <span style="color: maroon;">'</span><span style="color: #1060b6;">value</span><span style="color: maroon;">'</span><br /><span style="color: #008c00;">1.00000000</span><span style="color: #008c00;">,19</span><span style="color: #008c00;">.0612177051</span><br /><span style="color: #008c00;">6.21052632</span><span style="color: #008c00;">,100</span><span style="color: #008c00;">.657317014</span><br /><span style="color: #008c00;">11.42105263</span><span style="color: #008c00;">,111</span><span style="color: #008c00;">.081064358</span><br /><span style="color: #008c00;">16.63157895</span><span style="color: #008c00;">,232</span><span style="color: #008c00;">.929497684</span><br /><span style="color: #008c00;">21.84210526</span><span style="color: #008c00;">,224</span><span style="color: #008c00;">.490699818</span><br /><span style="color: #008c00;">27.05263158</span><span style="color: #008c00;">,279</span><span style="color: #008c00;">.538416476</span><br /><span style="color: #008c00;">32.26315789</span><span style="color: #008c00;">,377</span><span style="color: #008c00;">.203193621</span><br /><span style="color: #008c00;">37.47368421</span><span style="color: #008c00;">,443</span><span style="color: #008c00;">.521259213</span><br /><span style="color: #008c00;">42.68421053</span><span style="color: #008c00;">,444</span><span style="color: #008c00;">.889816318</span><br /><span style="color: #008c00;">47.89473684</span><span style="color: #008c00;">,527</span><span style="color: #008c00;">.26112329</span><br /><span style="color: #008c00;">53.10526316</span><span style="color: #008c00;">,569</span><span style="color: #008c00;">.99383123</span><br /><span style="color: #008c00;">58.31578947</span><span style="color: #008c00;">,635</span><span style="color: #008c00;">.948010167</span><br /><span style="color: #008c00;">63.52631579</span><span style="color: #008c00;">,667</span><span style="color: #008c00;">.667229067</span><br /><span style="color: #008c00;">68.73684211</span><span style="color: #008c00;">,734</span><span style="color: #008c00;">.623416964</span><br /><span style="color: #008c00;">73.94736842</span><span style="color: #008c00;">,754</span><span style="color: #008c00;">.704089053</span><br /><span style="color: #008c00;">79.15789474</span><span style="color: #008c00;">,834</span><span style="color: #008c00;">.453817955</span><br /><span style="color: #008c00;">84.36842105</span><span style="color: #008c00;">,828</span><span style="color: #008c00;">.770429695</span><br /><span style="color: #008c00;">89.57894737</span><span style="color: #008c00;">,884</span><span style="color: #008c00;">.032674467</span><br /><span style="color: #008c00;">94.78947368</span><span style="color: #008c00;">,925</span><span style="color: #008c00;">.518393595</span><br /><span style="color: #008c00;">100.0</span><span style="color: #008c00;">,978</span><span style="color: #008c00;">.592947013</span><br /></pre>
<br />And you want to plot the data and do a linear fitting (polynomial fit of degree one). Matplotlib does it like
this:<br /><br />
<pre
    style="background: #f6f8ff; color: #000020;"><span style="color: #200080; font-weight: bold;">import</span> numpy as np<br /><span style="color: #200080; font-weight: bold;">import</span> matplotlib<span style="color: #308080;">.</span>pyplot as plt<br /><span style="color: #200080; font-weight: bold;">import</span> matplotlib<span style="color: #308080;">.</span>mlab as mlab<br /><br /><span style="color: #004a43;"># read CSV as a numpy array</span><br />data <span style="color: #308080;">=</span> mlab<span style="color: #308080;">.</span>csv2rec<span style="color: #308080;">(</span><span style="background: #dd9999; color: white; font-style: italic; font-weight: bold;">'data.csv'</span><span style="color: #308080;">)</span><br /><br /><span style="color: #004a43;"># print CSV file headers</span><br />print data<span style="color: #308080;">.</span>dtype<span style="color: #308080;">.</span>names<br /><br /><span style="color: #004a43;"># load collumns as vectors</span><br />data_x <span style="color: #308080;">=</span> data<span style="color: #308080;">[</span><span style="background: #dd9999; color: white; font-style: italic; font-weight: bold;">'position'</span><span style="color: #308080;">]</span><br />data_y <span style="color: #308080;">=</span> data<span style="color: #308080;">[</span><span style="background: #dd9999; color: white; font-style: italic; font-weight: bold;">'value'</span><span style="color: #308080;">]</span><br /><br /><span style="color: #004a43;"># plot raw data</span><br />plt<span style="color: #308080;">.</span>plot<span style="color: #308080;">(</span>data_x<span style="color: #308080;">,</span>data_y<span style="color: #308080;">,</span><span style="color: #1060b6;">'o'</span><span style="color: #308080;">)</span><br /><br /><span style="color: #004a43;"># fit data with a polynomial of degree 1</span><span style="color: #308080;">:</span><span style="color: #004a43;"> ax</span><span style="color: #308080;">+</span><span style="color: #004a43;">b</span><span style="color: #308080;">=</span><span style="color: #004a43;">0</span><br />a<span style="color: #308080;">,</span>b <span style="color: #308080;">=</span> np<span style="color: #308080;">.</span>polyfit<span style="color: #308080;">(</span>data_x<span style="color: #308080;">,</span> data_y<span style="color: #308080;">,</span> <span style="color: #008c00;">1</span><span style="color: #308080;">)</span><br />data_y_fitted <span style="color: #308080;">=</span> np<span style="color: #308080;">.</span>polyval<span style="color: #308080;">(</span><span style="color: #308080;">[</span>a<span style="color: #308080;">,</span> b<span style="color: #308080;">]</span><span style="color: #308080;">,</span> data_x<span style="color: #308080;">)</span><br /><br /><span style="color: #004a43;">#plot fitted data</span><br />plt<span style="color: #308080;">.</span>plot<span style="color: #308080;">(</span>data_x<span style="color: #308080;">,</span>data_y_fitted<span style="color: #308080;">,</span><span style="color: #1060b6;">'-'</span><span style="color: #308080;">)</span><br /><br />plt<span style="color: #308080;">.</span>show<span style="color: #308080;">(</span><span style="color: #308080;">)</span><br /></pre>
<br /><br />Here the resulting Plot: <br /><br />
<div class="separator" style="clear: both; text-align: center;"><a
        href="http://1.bp.blogspot.com/-J2AqzrdeqQc/UKyjYyJRxNI/AAAAAAAAOeU/eaB8Q5qgOgg/s1600/Screenshot+from+2012-11-21+10:47:09.png"
        imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="537"
            src="http://1.bp.blogspot.com/-J2AqzrdeqQc/UKyjYyJRxNI/AAAAAAAAOeU/eaB8Q5qgOgg/s640/Screenshot+from+2012-11-21+10:47:09.png"
            width="640" /></a></div>
<div class="separator" style="clear: both; text-align: center;"><br /></div>Let's make it prettier:<br /><br /><br />
<pre
    style="background: #f6f8ff; color: #000020;"><span style="color: #200080; font-weight: bold;">import</span> numpy as np<br /><span style="color: #200080; font-weight: bold;">import</span> matplotlib<span style="color: #308080;">.</span>pyplot as plt<br /><span style="color: #200080; font-weight: bold;">import</span> matplotlib<span style="color: #308080;">.</span>mlab as mlab<br /><br /><span style="color: #004a43;"># read CSV as a numpy array</span><br />filePath <span style="color: #308080;">=</span> <span style="background: #dd9999; color: white; font-style: italic; font-weight: bold;">'data.csv'</span><br />data <span style="color: #308080;">=</span> mlab<span style="color: #308080;">.</span>csv2rec<span style="color: #308080;">(</span>filePath<span style="color: #308080;">)</span><br /><br /><span style="color: #004a43;"># print CSV file headers</span><br />print data<span style="color: #308080;">.</span>dtype<span style="color: #308080;">.</span>names<br /><br /><span style="color: #004a43;"># load collumns as vectors</span><br />data_x <span style="color: #308080;">=</span> data<span style="color: #308080;">[</span><span style="background: #dd9999; color: white; font-style: italic; font-weight: bold;">'position'</span><span style="color: #308080;">]</span><br />data_y <span style="color: #308080;">=</span> data<span style="color: #308080;">[</span><span style="background: #dd9999; color: white; font-style: italic; font-weight: bold;">'value'</span><span style="color: #308080;">]</span><br /><br /><span style="color: #004a43;"># figure</span><br />fig <span style="color: #308080;">=</span> plt<span style="color: #308080;">.</span>figure<span style="color: #308080;">(</span><span style="background: #dd9999; color: white; font-style: italic; font-weight: bold;">'.: MatPlotLib Example :.'</span><span style="color: #308080;">)</span><br />fig<span style="color: #308080;">.</span>suptitle<span style="color: #308080;">(</span><span style="background: #dd9999; color: white; font-style: italic; font-weight: bold;">'Plot for file '</span><span style="color: #308080;">+</span>filePath<span style="color: #308080;">,</span> fontsize<span style="color: #308080;">=</span><span style="color: #008c00;">12</span><span style="color: #308080;">,</span> fontweight<span style="color: #308080;">=</span><span style="color: #1060b6;">'bold'</span><span style="color: #308080;">)</span><br /><br /><span style="color: #004a43;"># Add my axis </span><span style="color: #308080;">(</span><span style="color: #004a43;">I only have one</span><span style="color: #308080;">,</span><span style="color: #004a43;"> but I could have two</span><span style="color: #308080;">,</span><span style="color: #004a43;"> e</span><span style="color: #308080;">.</span><span style="color: #004a43;">g</span><span style="color: #308080;">.</span><span style="color: #308080;">,</span><span style="color: #004a43;"> mirrored Y</span><span style="color: #308080;">)</span><br />ax <span style="color: #308080;">=</span> fig<span style="color: #308080;">.</span>add_subplot<span style="color: #308080;">(</span><span style="color: #008c00;">111</span><span style="color: #308080;">)</span><br /><br /><span style="color: #004a43;"># plot raw data</span><br /><span style="color: #004a43;"># I'm going to add some labels to add a legend after</span><br />ax<span style="color: #308080;">.</span>plot<span style="color: #308080;">(</span>data_x<span style="color: #308080;">,</span>data_y<span style="color: #308080;">,</span><span style="color: #1060b6;">'o'</span><span style="color: #308080;">,</span> label<span style="color: #308080;">=</span><span style="background: #dd9999; color: white; font-style: italic; font-weight: bold;">'Raw data'</span><span style="color: #308080;">)</span><br />ax<span style="color: #308080;">.</span>set_xlabel<span style="color: #308080;">(</span>data<span style="color: #308080;">.</span>dtype<span style="color: #308080;">.</span>names<span style="color: #308080;">[</span><span style="color: #008c00;">0</span><span style="color: #308080;">]</span><span style="color: #308080;">)</span><br /><br /><span style="color: #004a43;"># Now I want to have X axis with some Latex</span><span style="color: #308080;">:</span><br />from matplotlib <span style="color: #200080; font-weight: bold;">import</span> rc<br />rc<span style="color: #308080;">(</span><span style="color: #1060b6;">'text'</span><span style="color: #308080;">,</span> usetex<span style="color: #308080;">=</span>True<span style="color: #308080;">)</span><br />ax<span style="color: #308080;">.</span>set_ylabel<span style="color: #308080;">(</span>data<span style="color: #308080;">.</span>dtype<span style="color: #308080;">.</span>names<span style="color: #308080;">[</span><span style="color: #008c00;">1</span><span style="color: #308080;">]</span><span style="color: #308080;">+</span><span style="background: #dd9999; color: white; font-style: italic; font-weight: bold;">' ($\\AA^{-1}$)'</span><span style="color: #308080;">)</span><br />rc<span style="color: #308080;">(</span><span style="color: #1060b6;">'text'</span><span style="color: #308080;">,</span> usetex<span style="color: #308080;">=</span>False<span style="color: #308080;">)</span><br /><br /><span style="color: #004a43;"># fit data with a polynomial of degree 1</span><span style="color: #308080;">:</span><span style="color: #004a43;"> ax</span><span style="color: #308080;">+</span><span style="color: #004a43;">b</span><span style="color: #308080;">=</span><span style="color: #004a43;">0</span><br />a<span style="color: #308080;">,</span>b <span style="color: #308080;">=</span> np<span style="color: #308080;">.</span>polyfit<span style="color: #308080;">(</span>data_x<span style="color: #308080;">,</span> data_y<span style="color: #308080;">,</span> <span style="color: #008c00;">1</span><span style="color: #308080;">)</span><br />data_y_fitted <span style="color: #308080;">=</span> np<span style="color: #308080;">.</span>polyval<span style="color: #308080;">(</span><span style="color: #308080;">[</span>a<span style="color: #308080;">,</span> b<span style="color: #308080;">]</span><span style="color: #308080;">,</span> data_x<span style="color: #308080;">)</span><br /><br /><span style="color: #004a43;">#plot fitted data</span><br />ax<span style="color: #308080;">.</span>plot<span style="color: #308080;">(</span>data_x<span style="color: #308080;">,</span>data_y_fitted<span style="color: #308080;">,</span><span style="color: #1060b6;">'-'</span><span style="color: #308080;">,</span> label<span style="color: #308080;">=</span><span style="background: #dd9999; color: white; font-style: italic; font-weight: bold;">'Fitted data'</span><span style="color: #308080;">)</span><br /><br /><span style="color: #004a43;"># Let's add the legend to the lower right corner</span><br />ax<span style="color: #308080;">.</span>legend<span style="color: #308080;">(</span>loc<span style="color: #308080;">=</span> <span style="background: #dd9999; color: white; font-style: italic; font-weight: bold;">'lower right'</span><span style="color: #308080;">)</span><br /><br />plt<span style="color: #308080;">.</span>show<span style="color: #308080;">(</span><span style="color: #308080;">)</span><br /></pre>
<br /><i>Et voilà</i> the result:<br /><br />
<div class="separator" style="clear: both; text-align: center;"><a
        href="http://1.bp.blogspot.com/-5UmWpK6idz4/UKysRutxPZI/AAAAAAAAOek/pyheIFwA29M/s1600/Screenshot+from+2012-11-21+11:25:54.png"
        imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="537"
            src="http://1.bp.blogspot.com/-5UmWpK6idz4/UKysRutxPZI/AAAAAAAAOek/pyheIFwA29M/s640/Screenshot+from+2012-11-21+11:25:54.png"
            width="640" /></a></div>
<div class="separator" style="clear: both; text-align: center;"><br /></div>Simple isn't it?<br /><br />