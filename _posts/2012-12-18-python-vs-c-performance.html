---
layout: post
title: Python vs C++ Performance
date: '2012-12-18T08:49:00.001-05:00'
author: ricleal
tags:
- Programming
- Python
excerpt: '...'
comments: true
---

Just for curiosity, I wanted to see how fast is C++ compared with regular Python and Python using the numpy library.
Below the results:<br /><br />A bit of Python code with regular python, same loop using numpy, and numpy vectorial (like
in MatLab):<br /><br />
<pre
    style="background: #f6f8ff; color: #000020;"><span style="color: #595979;">'''</span><br /><span style="color: #595979;">Created on Nov 19, 2012</span><br /><span style="color: #595979;"></span><br /><span style="color: #595979;">@author: leal</span><br /><span style="color: #595979;">'''</span><br /><br /><span style="color: #200080; font-weight: bold;">import</span> numpy as np<br /><span style="color: #200080; font-weight: bold;">from</span> datetime <span style="color: #200080; font-weight: bold;">import</span> datetime<br /></pre>
<pre
    style="background: #f6f8ff; color: #000020;"><pre>nSpectra <span style="color: #308080;">=</span> <span style="color: #008c00;">12</span> <span style="color: #308080;">*</span> <span style="color: #008c00;">32</span> <span style="color: #308080;">*</span> <span style="color: #008c00;">256</span><br />nBinsTotal <span style="color: #308080;">=</span> nSpectra <span style="color: #308080;">*</span> <span style="color: #008c00;">512</span><span style="color: #308080;">;</span><br />    </pre>
<span style="color: #200080; font-weight: bold;">def</span> testSpectraIN5<span style="color: #308080;">(</span><span
    style="color: #308080;">)</span><span style="color: #308080;">:</span> total <span style="color: #308080;">=</span>
<span style="color: #308080;">[</span><span style="color: #308080;">]</span> <span
    style="color: #200080; font-weight: bold;">for</span> i <span style="color: #200080; font-weight: bold;">in</span>
<span style="color: #e34adc;">range</span><span style="color: #308080;">(</span>nBinsTotal<span
    style="color: #308080;">)</span><span style="color: #308080;">:</span> res <span style="color: #308080;">=</span>
<span style="color: #008c00;">500</span> <span style="color: #308080;">*</span> <span style="color: #008c00;">500</span>
<span style="color: #308080;">+</span> i total<span style="color: #308080;">.</span>append<span
    style="color: #308080;">(</span>res<span style="color: #308080;">)</span> <span
    style="color: #200080; font-weight: bold;">def</span> testSpectraIN5np<span style="color: #308080;">(</span><span
    style="color: #308080;">)</span><span style="color: #308080;">:</span> total <span style="color: #308080;">=</span>
np<span style="color: #308080;">.</span>empty<span style="color: #308080;">(</span>nBinsTotal<span
    style="color: #308080;">,</span> dtype<span style="color: #308080;">=</span><span
    style="color: #e34adc;">float</span><span style="color: #308080;">)</span> <span
    style="color: #200080; font-weight: bold;">for</span> i <span style="color: #200080; font-weight: bold;">in</span>
<span style="color: #e34adc;">range</span><span style="color: #308080;">(</span>nBinsTotal<span
    style="color: #308080;">)</span><span style="color: #308080;">:</span> res <span style="color: #308080;">=</span>
<span style="color: #008c00;">500</span> <span style="color: #308080;">*</span> <span style="color: #008c00;">500</span>
<span style="color: #308080;">+</span> i total<span style="color: #308080;">[</span>i<span
    style="color: #308080;">]</span><span style="color: #308080;">=</span>res <span
    style="color: #200080; font-weight: bold;">def</span> testSpectraIN5npOpt<span style="color: #308080;">(</span><span
    style="color: #308080;">)</span><span style="color: #308080;">:</span> <span style="color: #595979;"># res =
    [0..nBinsTotal-1]</span> res <span style="color: #308080;">=</span> np<span
    style="color: #308080;">.</span>arange<span style="color: #308080;">(</span>nBinsTotal<span
    style="color: #308080;">,</span> dtype<span style="color: #308080;">=</span><span
    style="color: #e34adc;">float</span><span style="color: #308080;">)</span> total <span
    style="color: #308080;">=</span> <span style="color: #008c00;">500</span> <span style="color: #308080;">*</span>
<span style="color: #008c00;">500</span> <span style="color: #308080;">+</span> res <span
    style="color: #200080; font-weight: bold;">if</span> <span style="color: #e34adc;">__name__</span> <span
    style="color: #308080;">=</span><span style="color: #308080;">=</span> <span
    style="color: #1060b6;">'__main__'</span><span style="color: #308080;">:</span> <span
    style="color: #200080; font-weight: bold;">print</span> <span style="color: #1060b6;">"Main has started!"</span>
<span style="color: #200080; font-weight: bold;">print</span> <span style="color: #1060b6;">"* testSpectraIN5"</span>
t_start <span style="color: #308080;">=</span> datetime<span style="color: #308080;">.</span>now<span
    style="color: #308080;">(</span><span style="color: #308080;">)</span> testSpectraIN5<span
    style="color: #308080;">(</span><span style="color: #308080;">)</span> t_end <span style="color: #308080;">=</span>
datetime<span style="color: #308080;">.</span>now<span style="color: #308080;">(</span><span
    style="color: #308080;">)</span> t_total <span style="color: #308080;">=</span> t_end <span
    style="color: #308080;">-</span> t_start <span style="color: #200080; font-weight: bold;">print</span> <span
    style="color: #1060b6;">"Total time: "</span><span style="color: #308080;">,</span> t_total<span
    style="color: #308080;">,</span> <span style="color: #1060b6;">" seconds"</span> <span
    style="color: #200080; font-weight: bold;">print</span> <span style="color: #1060b6;">"* testSpectraIN5np"</span>
t_start <span style="color: #308080;">=</span> datetime<span style="color: #308080;">.</span>now<span
    style="color: #308080;">(</span><span style="color: #308080;">)</span> testSpectraIN5np<span
    style="color: #308080;">(</span><span style="color: #308080;">)</span> t_end <span style="color: #308080;">=</span>
datetime<span style="color: #308080;">.</span>now<span style="color: #308080;">(</span><span
    style="color: #308080;">)</span> t_total <span style="color: #308080;">=</span> t_end <span
    style="color: #308080;">-</span> t_start <span style="color: #200080; font-weight: bold;">print</span> <span
    style="color: #1060b6;">"Total time: "</span><span style="color: #308080;">,</span> t_total<span
    style="color: #308080;">,</span> <span style="color: #1060b6;">" seconds"</span> <span
    style="color: #200080; font-weight: bold;">print</span> <span style="color: #1060b6;">"* testSpectraIN5npOpt"</span>
t_start <span style="color: #308080;">=</span> datetime<span style="color: #308080;">.</span>now<span
    style="color: #308080;">(</span><span style="color: #308080;">)</span> testSpectraIN5npOpt<span
    style="color: #308080;">(</span><span style="color: #308080;">)</span> t_end <span style="color: #308080;">=</span>
datetime<span style="color: #308080;">.</span>now<span style="color: #308080;">(</span><span
    style="color: #308080;">)</span> t_total <span style="color: #308080;">=</span> t_end <span
    style="color: #308080;">-</span> t_start <span style="color: #200080; font-weight: bold;">print</span> <span
    style="color: #1060b6;">"Total time: "</span><span style="color: #308080;">,</span> t_total<span
    style="color: #308080;">,</span> <span style="color: #1060b6;">" seconds"</span> <span
    style="color: #200080; font-weight: bold;">print</span> <span style="color: #1060b6;">"Main has finished!"</span>
</pre><br />
<div>Python v 2.7.3 results:<br /><br /></div>
<pre
    style="background: #f6f8ff; color: #000020;">Main has started<span style="color: #308080;">!</span><br /><span style="color: #308080;">*</span> testSpectraIN5<br />Total time<span style="color: #308080;">:</span>  <span style="color: #8745a0;">0:00:12</span><span style="color: #008c00;">.781883</span>  seconds<br /><span style="color: #308080;">*</span> testSpectraIN5np<br />Total time<span style="color: #308080;">:</span>  <span style="color: #8745a0;">0:00:09</span><span style="color: #008c00;">.553932</span>  seconds<br /><span style="color: #308080;">*</span> testSpectraIN5npOpt<br />Total time<span style="color: #308080;">:</span>  <span style="color: #8745a0;">0:00:00</span><span style="color: #008c00;">.823714</span>  seconds<br />Main has finished<span style="color: #308080;">!</span><br /></pre>
<br />For C++, I just did two cycles, one without initialising the vector with its size, and other one with
it.&nbsp;Code is below:<br /><br />
<pre
    style="background: #f6f8ff; color: #000020;"><span style="color: #595979;">// constructing vectors</span><br /><span style="color: #004a43;">#</span><span style="color: #004a43;">include </span><span style="color: maroon;">&lt;</span><span style="color: #40015a;">iostream</span><span style="color: maroon;">&gt;</span><br /><span style="color: #004a43;">#</span><span style="color: #004a43;">include </span><span style="color: maroon;">&lt;</span><span style="color: #40015a;">vector</span><span style="color: maroon;">&gt;</span><br /><span style="color: #004a43;">#</span><span style="color: #004a43;">include </span><span style="color: maroon;">&lt;</span><span style="color: #40015a;">valarray</span><span style="color: maroon;">&gt;</span><br /><br /><span style="color: #595979;">// C++11</span><br /><span style="color: #004a43;">#</span><span style="color: #004a43;">include </span><span style="color: maroon;">&lt;</span><span style="color: #40015a;">chrono</span><span style="color: maroon;">&gt;</span><br /><span style="color: #200080; font-weight: bold;">typedef</span> <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span>chrono<span style="color: #406080;">::</span>high_resolution_clock Clock<span style="color: #406080;">;</span><br /><span style="color: #200080; font-weight: bold;">typedef</span> <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span>chrono<span style="color: #406080;">::</span>milliseconds milliseconds<span style="color: #406080;">;</span><br /><br /><span style="color: #200080; font-weight: bold;">int</span> <span style="color: #400000;">main</span><span style="color: #308080;">(</span><span style="color: #308080;">)</span> <span style="color: #406080;">{</span><br /><br />    <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span><span style="color: #003060;">cout</span> <span style="color: #308080;">&lt;</span><span style="color: #308080;">&lt;</span> <span style="color: maroon;">"</span><span style="color: #1060b6;">Main has started!</span><span style="color: maroon;">"</span> <span style="color: #308080;">&lt;</span><span style="color: #308080;">&lt;</span> <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span>endl<span style="color: #406080;">;</span><br /><br />    Clock<span style="color: #406080;">::</span>time_point t0 <span style="color: #308080;">=</span> Clock<span style="color: #406080;">::</span>now<span style="color: #308080;">(</span><span style="color: #308080;">)</span><span style="color: #406080;">;</span><br /><br />    <span style="color: #200080; font-weight: bold;">int</span> nSpectra <span style="color: #308080;">=</span> <span style="color: #008c00;">12</span> <span style="color: #308080;">*</span> <span style="color: #008c00;">32</span> <span style="color: #308080;">*</span> <span style="color: #008c00;">256</span><span style="color: #406080;">;</span><br />    <span style="color: #200080; font-weight: bold;">int</span> nBinsTotal <span style="color: #308080;">=</span> nSpectra <span style="color: #308080;">*</span> <span style="color: #008c00;">512</span><span style="color: #406080;">;</span><br /><br />    <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span><span style="color: #003060;">vector</span><span style="color: #406080;">&lt;</span><span style="color: #200080; font-weight: bold;">double</span><span style="color: #406080;">&gt;</span> total<span style="color: #406080;">;</span> <span style="color: #595979;">//(nBinsTotal);</span><br /><br />    <span style="color: #200080; font-weight: bold;">for</span> <span style="color: #308080;">(</span><span style="color: #200080; font-weight: bold;">int</span> i <span style="color: #308080;">=</span> <span style="color: #008c00;">0</span><span style="color: #406080;">;</span> i <span style="color: #308080;">&lt;</span> nBinsTotal<span style="color: #406080;">;</span> i<span style="color: #308080;">+</span><span style="color: #308080;">+</span><span style="color: #308080;">)</span> <span style="color: #406080;">{</span><br />        <span style="color: #200080; font-weight: bold;">double</span> res <span style="color: #308080;">=</span> <span style="color: #008c00;">500</span> <span style="color: #308080;">*</span> <span style="color: #008c00;">500</span> <span style="color: #308080;">+</span> i<span style="color: #406080;">;</span><br />        total<span style="color: #308080;">.</span>push_back<span style="color: #308080;">(</span>res<span style="color: #308080;">)</span><span style="color: #406080;">;</span><br />    <span style="color: #406080;">}</span><br /><br />    Clock<span style="color: #406080;">::</span>time_point t1 <span style="color: #308080;">=</span> Clock<span style="color: #406080;">::</span>now<span style="color: #308080;">(</span><span style="color: #308080;">)</span><span style="color: #406080;">;</span><br />    milliseconds ms <span style="color: #308080;">=</span> <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span>chrono<span style="color: #406080;">::</span>duration_cast<span style="color: #406080;">&lt;</span>milliseconds<span style="color: #406080;">&gt;</span><span style="color: #308080;">(</span>t1 <span style="color: #308080;">-</span> t0<span style="color: #308080;">)</span><span style="color: #406080;">;</span><br /><br />    <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span><span style="color: #003060;">cout</span><span style="color: #308080;">.</span>precision<span style="color: #308080;">(</span><span style="color: #008c00;">2</span><span style="color: #308080;">)</span><span style="color: #406080;">;</span><br />    <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span><span style="color: #003060;">cout</span> <span style="color: #308080;">&lt;</span><span style="color: #308080;">&lt;</span> <span style="color: maroon;">"</span><span style="color: #1060b6;">Total time: </span><span style="color: maroon;">"</span> <span style="color: #308080;">&lt;</span><span style="color: #308080;">&lt;</span> <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span>fixed <span style="color: #308080;">&lt;</span><span style="color: #308080;">&lt;</span> ms<span style="color: #308080;">.</span><span style="color: #003060;">count</span><span style="color: #308080;">(</span><span style="color: #308080;">)</span> <span style="color: #308080;">*</span> <span style="color: green;">1e-3</span> <span style="color: #308080;">&lt;</span><span style="color: #308080;">&lt;</span> <span style="color: maroon;">"</span><span style="color: #1060b6;"> seconds</span><span style="color: maroon;">"</span><span style="color: #308080;">&lt;</span><span style="color: #308080;">&lt;</span> <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span>endl<span style="color: #406080;">;</span><br /><br />    <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span><span style="color: #003060;">cout</span> <span style="color: #308080;">&lt;</span><span style="color: #308080;">&lt;</span> <span style="color: maroon;">"</span><span style="color: #1060b6;">Vector with known size:</span><span style="color: maroon;">"</span><span style="color: #308080;">&lt;</span><span style="color: #308080;">&lt;</span> <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span>endl<span style="color: #406080;">;</span><br />    t0 <span style="color: #308080;">=</span> Clock<span style="color: #406080;">::</span>now<span style="color: #308080;">(</span><span style="color: #308080;">)</span><span style="color: #406080;">;</span><br />    <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span><span style="color: #003060;">vector</span><span style="color: #406080;">&lt;</span><span style="color: #200080; font-weight: bold;">double</span><span style="color: #406080;">&gt;</span> total2<span style="color: #308080;">(</span>nBinsTotal<span style="color: #308080;">)</span><span style="color: #406080;">;</span><br /><br />    <span style="color: #200080; font-weight: bold;">for</span> <span style="color: #308080;">(</span><span style="color: #200080; font-weight: bold;">int</span> i <span style="color: #308080;">=</span> <span style="color: #008c00;">0</span><span style="color: #406080;">;</span> i <span style="color: #308080;">&lt;</span> nBinsTotal<span style="color: #406080;">;</span> i<span style="color: #308080;">+</span><span style="color: #308080;">+</span><span style="color: #308080;">)</span> <span style="color: #406080;">{</span><br />        <span style="color: #200080; font-weight: bold;">double</span> res <span style="color: #308080;">=</span> <span style="color: #008c00;">500</span> <span style="color: #308080;">*</span> <span style="color: #008c00;">500</span> <span style="color: #308080;">+</span> i<span style="color: #406080;">;</span><br />        total2<span style="color: #308080;">[</span>i<span style="color: #308080;">]</span> <span style="color: #308080;">=</span> res<span style="color: #406080;">;</span><br />    <span style="color: #406080;">}</span><br /><br />    t1 <span style="color: #308080;">=</span> Clock<span style="color: #406080;">::</span>now<span style="color: #308080;">(</span><span style="color: #308080;">)</span><span style="color: #406080;">;</span><br />    ms <span style="color: #308080;">=</span> <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span>chrono<span style="color: #406080;">::</span>duration_cast<span style="color: #406080;">&lt;</span>milliseconds<span style="color: #406080;">&gt;</span><span style="color: #308080;">(</span>t1 <span style="color: #308080;">-</span> t0<span style="color: #308080;">)</span><span style="color: #406080;">;</span><br /><br />    <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span><span style="color: #003060;">cout</span><span style="color: #308080;">.</span>precision<span style="color: #308080;">(</span><span style="color: #008c00;">2</span><span style="color: #308080;">)</span><span style="color: #406080;">;</span><br />    <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span><span style="color: #003060;">cout</span> <span style="color: #308080;">&lt;</span><span style="color: #308080;">&lt;</span> <span style="color: maroon;">"</span><span style="color: #1060b6;">Total time: </span><span style="color: maroon;">"</span> <span style="color: #308080;">&lt;</span><span style="color: #308080;">&lt;</span> <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span>fixed <span style="color: #308080;">&lt;</span><span style="color: #308080;">&lt;</span> ms<span style="color: #308080;">.</span><span style="color: #003060;">count</span><span style="color: #308080;">(</span><span style="color: #308080;">)</span> <span style="color: #308080;">*</span> <span style="color: green;">1e-3</span> <span style="color: #308080;">&lt;</span><span style="color: #308080;">&lt;</span> <span style="color: maroon;">"</span><span style="color: #1060b6;"> seconds</span><span style="color: maroon;">"</span><span style="color: #308080;">&lt;</span><span style="color: #308080;">&lt;</span> <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span>endl<span style="color: #406080;">;</span><br /><br /><br />    <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span><span style="color: #003060;">cout</span> <span style="color: #308080;">&lt;</span><span style="color: #308080;">&lt;</span> <span style="color: maroon;">"</span><span style="color: #1060b6;">Main has finished!</span><span style="color: maroon;">"</span> <span style="color: #308080;">&lt;</span><span style="color: #308080;">&lt;</span> <span style="color: #0066ee;">std</span><span style="color: #406080;">::</span>endl<span style="color: #406080;">;</span><br />    <span style="color: #200080; font-weight: bold;">return</span> <span style="color: #008c00;">0</span><span style="color: #406080;">;</span><br /><span style="color: #406080;">}</span><br /></pre>
<br />The result is:<br /><br />
<pre
    style="background: #f6f8ff; color: #000020;">Main has started<span style="color: #308080;">!</span><br />Total time<span style="color: #308080;">:</span> <span style="color: #008c00;">1.70</span> seconds<br />Vector with known size<span style="color: #308080;">:</span><br />Total time<span style="color: #308080;">:</span> <span style="color: #008c00;">0.74</span> seconds<br />Main has finished<span style="color: #308080;">!</span><br /></pre>
<br />It's interesting to see how the programming approach changes the results!<br />Surprisingly, Python, using a
vectorial numpy approach, can be as fast as C++. It's not a surprise however, that an initlised array in C++&nbsp;can be
twice faster!<br /><br />
<h3>EDIT:</h3>What about java???<br />So I tried first with&nbsp;ArrayList and Vector but they were so slow (more than
30 seconds), that I didn't even dare to add them below... I came up with this code, but doesn't really compare to what I
did in C++.<br /><br />
<pre
    style="background: #f6f8ff; color: #000020;"><span style="color: #200080; font-weight: bold;">import</span><span style="color: #004a43;"> java</span><span style="color: #308080;">.</span><span style="color: #004a43;">util</span><span style="color: #308080;">.</span><span style="color: #004a43;">Vector</span><span style="color: #406080;">;</span><br /><br /><span style="color: #200080; font-weight: bold;">public</span> <span style="color: #200080; font-weight: bold;">class</span> VectorTest <span style="color: #406080;">{</span><br /><br />    <span style="color: #200080; font-weight: bold;">public</span> <span style="color: #200080; font-weight: bold;">static</span> <span style="color: #7779bb;">void</span> main<span style="color: #308080;">(</span><span style="color: #6679aa; font-weight: bold;">String</span><span style="color: #308080;">[</span><span style="color: #308080;">]</span> args<span style="color: #308080;">)</span> <span style="color: #406080;">{</span><br /><br />        <span style="color: #7779bb;">int</span> nSpectra <span style="color: #308080;">=</span> <span style="color: #008c00;">12</span> <span style="color: #308080;">*</span> <span style="color: #008c00;">32</span> <span style="color: #308080;">*</span> <span style="color: #008c00;">256</span><span style="color: #406080;">;</span><br />        <span style="color: #7779bb;">int</span> nBinsTotal <span style="color: #308080;">=</span> nSpectra <span style="color: #308080;">*</span> <span style="color: #008c00;">512</span><span style="color: #406080;">;</span><br /><br />        <span style="color: #7779bb;">double</span><span style="color: #308080;">[</span><span style="color: #308080;">]</span> total2 <span style="color: #308080;">=</span> <span style="color: #200080; font-weight: bold;">new</span> <span style="color: #7779bb;">double</span><span style="color: #308080;">[</span>nBinsTotal<span style="color: #308080;">]</span><span style="color: #406080;">;</span><br />        <br />       &nbsp;<span style="color: #7779bb;">long </span>startTime <span style="color: #308080;">=</span> <span style="color: #6679aa; font-weight: bold;">System</span><span style="color: #308080;">.</span>nanoTime<span style="color: #308080;">(</span><span style="color: #308080;">)</span><span style="color: #406080;">;</span></pre>
<pre
    style="background: #f6f8ff; color: #000020;">        <span style="color: #595979;">// &lt;E&gt; Element type of Vector e.g. String, Integer, Object ...</span><br />        <span style="color: #200080; font-weight: bold;">for</span> <span style="color: #308080;">(</span><span style="color: #7779bb;">int</span> i <span style="color: #308080;">=</span> <span style="color: #008c00;">0</span><span style="color: #406080;">;</span> i <span style="color: #308080;">&lt;</span> nBinsTotal<span style="color: #406080;">;</span> i<span style="color: #308080;">+</span><span style="color: #308080;">+</span><span style="color: #308080;">)</span> <span style="color: #406080;">{</span><br />            <span style="color: #7779bb;">double</span> res <span style="color: #308080;">=</span> <span style="color: #008c00;">500</span> <span style="color: #308080;">*</span> <span style="color: #008c00;">500</span> <span style="color: #308080;">+</span> i<span style="color: #406080;">;</span><br />            total2<span style="color: #308080;">[</span>i<span style="color: #308080;">]</span> <span style="color: #308080;">=</span> res<span style="color: #406080;">;</span><br />        <span style="color: #406080;">}</span><br />       &nbsp;<span style="color: #7779bb;">long </span>endTime <span style="color: #308080;">=</span> <span style="color: #6679aa; font-weight: bold;">System</span><span style="color: #308080;">.</span>nanoTime<span style="color: #308080;">(</span><span style="color: #308080;">)</span><span style="color: #406080;">;</span></pre>
<pre
    style="background: #f6f8ff; color: #000020;">       &nbsp;<span style="color: #7779bb;">long </span>duration <span style="color: #308080;">=</span> endTime <span style="color: #308080;">-</span> startTime<span style="color: #406080;">;</span></pre>
<pre
    style="background: #f6f8ff; color: #000020;">        <span style="color: #6679aa; font-weight: bold;">System</span><span style="color: #308080;">.</span>out<span style="color: #308080;">.</span>println<span style="color: #308080;">(</span><span style="color: #1060b6;">"Total time: "</span> <span style="color: #308080;">+</span> duration <span style="color: #308080;">*</span> <span style="color: green;">1e-9</span><span style="color: #308080;">)</span><span style="color: #406080;">;</span><br /><br />    <span style="color: #406080;">}</span><br /><span style="color: #406080;">}</span><br /></pre>
<br />
<pre
    style="background: #f6f8ff; color: #000020;">Start calculation with arrays and initilisation<span style="color: #308080;">.</span><br />Total time<span style="color: #308080;">:</span> <span style="color: #008c00;">0.073217508</span><br /></pre>
<br />Using regular arrays, Java can be as fast as C++ Vectors with predefined length.<br /><br />